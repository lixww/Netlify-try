+++
title = "Android Service Note"
date = 2022-11-16
[taxonomies]
  tags = ["note", "components", "Android"]

+++

- serviceæ˜¯ä¸€ç§å¯ä»¥ åœ¨åå°é•¿æ—¶é—´è¿è¡Œ & ä¸æä¾›ä»»ä½•ç•Œé¢ çš„åº”ç”¨ç»„ä»¶

- serviceå¯ä»¥åœ¨åå°åšï¼šå¤„ç†ç½‘ç»œäº‹åŠ¡ã€æ’­æ”¾éŸ³ä¹ğŸµã€æ‰§è¡Œæ–‡ä»¶IOã€ä¸ContentProviderè¿›è¡Œäº¤äº’

- Service åˆ†ç±»ï¼š

    a.å‰å°ï¼ˆè¦æ˜¾ç¤ºåœ¨é€šçŸ¥é‡Œï¼‰ï¼šeg æ”¾æ­Œ

    b.åå°ï¼ˆçœŸçš„æ²¡uiï¼‰ï¼šeg å‹ç¼©å­˜å‚¨ç©ºé—´çš„ä»»åŠ¡

        - noteï¼šafter api26ï¼Œåå°æœåŠ¡æ‰§è¡Œé™åˆ¶ğŸ”ï¼Œè€ƒè™‘è®¡åˆ’ä½œä¸šï¼Ÿ
    
    c.In ç»‘å®šçŠ¶æ€ï¼Œor not

        - bindService()

        - ç»„ä»¶å¯¹serviceçš„ç»‘å®šæ˜¯N:1çš„å…³ç³»

            - ä¹Ÿå¯ä»¥æŠŠæœåŠ¡å£°æ˜æˆç§æœ‰çš„ï¼Œè¿™æ ·å°±ä¸ç»™åˆ«çš„appç”¨äº†

        - ç»™ç»„ä»¶çš„é‡è¦çš„å›è°ƒï¼šonStartCommand()æ¥å¯åŠ¨æœåŠ¡ï¼ŒonBind()æ¥ç»‘å®šæœåŠ¡

            - ä¸è®ºæœåŠ¡åœ¨å¯åŠ¨/ç»‘å®šçŠ¶æ€ä¸‹ï¼Œç»„ä»¶éƒ½å¯ä»¥ç”¨intentæ¥ä½¿ç”¨æœåŠ¡

- Service vs çº¿ç¨‹

    a. serviceè¿˜æ˜¯åœ¨ä¸»çº¿ç¨‹è¿è¡Œï¼Œæ‰€ä»¥å¦‚æœæ˜¯ å¯†é›†å‹/ç»„ç»‡æ€§æ“ä½œï¼Œåº”è¯¥åœ¨æœåŠ¡é‡Œæ–°å»ºçº¿ç¨‹

- åå°ä»»åŠ¡ï¼ˆè·Ÿ åå°æœåŠ¡ æ˜¯ä¸€å›äº‹å—ï¼ŸYES call it è®¡åˆ’ä½œä¸š - -ï¼‰

    a. åˆ†ç±»ï¼šå³æ—¶ä»»åŠ¡ immediateã€å»¶æœŸä»»åŠ¡ Deferredã€ç²¾ç¡®ä»»åŠ¡ Exact
        
        - è€ƒè™‘ï¼šä»»åŠ¡æ˜¯å¦è¦åœ¨ç”¨æˆ·&åº”ç”¨è¿›è¡Œäº’åŠ¨çš„æ—¶å€™å®Œæˆï¼Ÿï¼ˆYES -> å³æ—¶ï¼‰ä»»åŠ¡æ˜¯å¦è¦åœ¨ç²¾ç¡®çš„æ—¶é—´ç‚¹è¿è¡Œï¼Ÿ(YES -> ç²¾ç¡®ï¼‰

    b. å³æ—¶ä»»åŠ¡ -ã€‹kotlinåç¨‹äº†è§£ä¸€ä¸‹

        - If å³æ—¶&é•¿æ—¶é—´ -ã€‰WorkManager

    c. å»¶æœŸä»»åŠ¡ -ã€‹WorkManageräº†è§£ä¸€ä¸‹

    d. ç²¾ç¡®ä»»åŠ¡ -ã€‹AlarmManager

- About background service & broadcast usageï¼š[androidDeveloper-åå°ä»»åŠ¡æŒ‡åŒ—](https://developer.android.com/guide/background)
